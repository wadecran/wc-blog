@using Microsoft.AspNet.Identity
@using wc_Blog.Models
@using wc_Blog.Helpers
@{
	var userHelper = new UserHelper();
}
@model EmailModel
@{
	ViewBag.Title = "Contact";
}
<h2>@ViewBag.Title.</h2>

@using (Html.BeginForm())
{
	@Html.AntiForgeryToken()

	<h4>Send me a message</h4>
	<hr />
	@Html.ValidationSummary("", new { @class = "text-danger" })
	<div class="form-group">
		@Html.LabelFor(m => m.FromName, new { @class = "col-md-2 control-label" })
		<div class="col-md-10">
			@if (User.Identity.IsAuthenticated)
			{
				<input class="Form-control" data-val="true" data-val-required="The Name field is required." id="FromName" name="FromName" type="text" value="@userHelper.GetFullName(User.Identity.GetUserId())" />
			}
			else
			{
				<input class="Form-control" data-val="true" data-val-required="The Name field is required." id="FromName" name="FromName" type="text" value="" />
			}
		</div>
	</div>
	<div class="form-group">
		@Html.LabelFor(m => m.FromEmail, new { @class = "col-md-2 control-label" })
		<div class="col-md-10">
			@if (User.Identity.IsAuthenticated)
			{
				string email = User.Identity.GetUserName();
				<input class="Form-control" data-val="true" data-val-email="The Email field is not a valid e-mail address." data-val-required="The Email field is required." id="FromEmail" name="FromEmail" type="text" value="@email" />
			}
			else
			{
				@*Html.ValidationMessageFor(m => m.FromEmail) *@
				<input class="Form-control" data-val="true" data-val-email="The Email field is not a valid e-mail address." placeholder="example@email.com" data-val-required="The Email field is required." id="FromEmail" name="FromEmail" type="text" value="" />
			}
		</div>
	</div>
	<div class="form-group">
		@Html.LabelFor(m => m.Subject, new { @class = "col-md-2 control-label" })
		<div class="col-md-10">
			@Html.TextBoxFor(m => m.Subject, new { @class = "Form-control" })
			@Html.ValidationMessageFor(m => m.FromEmail)
		</div>
	</div>
	<div class="form-group">
		@Html.LabelFor(m => m.Body, new { @class = "col-md-2 control-label" })
		<div class="col">
			@Html.TextBoxFor(m => m.Body, new { @class = "Form-control", cols = 30, rows = 10 })
			@Html.ValidationMessageFor(m => m.FromEmail)
		</div>
	</div>
	<div class="form-group">
		<div class="col-md-offset-2 col-md-10">
			<input type="submit" class="btn btn-primary" value="Send" />
		</div>
	</div>
}


